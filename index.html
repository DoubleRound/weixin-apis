<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>微信API For NodeJS</title>
		<link rel="stylesheet" type="text/css" href="css/semantic.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/common.css"/>
		<link rel="stylesheet" type="text/css" href="styles/atelier-heath.dark.css"/>
		<script type="text/javascript" charset="utf-8" src="js/highlight.pack.js"></script>
		<script>
			hljs.initHighlightingOnLoad();
		</script>
	</head>
	<body>

		<!-- 侧边导航栏 -->
		<div class="ui left sidebar vertical menu active">
			<div class="header item">
				<i class="list layout icon"></i>一、新手接入
			</div>
			<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97" target="_blank" class="item">接入指南</a>
			<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B%E4%BB%8B%E7%BB%8D" target="_blank" class="item">典型案例介绍</a>
			<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E5%BC%80%E5%8F%91%E8%80%85%E8%A7%84%E8%8C%83" target="_blank" class="item">开发者规范</a>

			<div class="header item">
				<i class="list layout icon"></i>二、基础支持
			</div>
			<a href="#获取access_token" class="item">获取access_token</a>
			<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E5%85%A8%E5%B1%80%E8%BF%94%E5%9B%9E%E7%A0%81%E8%AF%B4%E6%98%8E" target="_blank" class="item">全局返回码说明</a>
			<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E6%8E%A5%E5%8F%A3%E9%A2%91%E7%8E%87%E9%99%90%E5%88%B6%E8%AF%B4%E6%98%8E" target="_blank" class="item">接口频率限制说明</a>
			<a href="#上传下载多媒体文件" class="item">上传下载多媒体文件</a>

			<div class="header item">
				<i class="list layout icon"></i>三、接受消息
			</div>
			<a href="#验证消息真实性" class="item">验证消息真实性</a>
			<a href="#接收普通消息" class="item">接收普通消息</a>
			<a href="#接收事件推送" class="item">接收事件推送</a>
			<a href="#接收语音识别结果" class="item">接收语音识别结果</a>

			<div class="header item">
				<i class="list layout icon"></i>四、发送消息
			</div>
			<a href="#发送被动响应消息" class="item">发送被动响应消息</a>
			<a href="#发送客服消息" class="item">发送客服消息</a>
			<a href="#高级群发接口" class="item">高级群发接口</a>

			<div class="header item">
				<i class="list layout icon"></i>五、用户管理
			</div>
			<a href="" class="item">分组管理接口</a>
			<a href="" class="item">获取用户基本信息</a>
			<a href="" class="item">获取关注者列表</a>
			<a href="" class="item">获取用户地理位置</a>
			<a href="" class="item">网页授权获取用户基本信息</a>
			<a href="" class="item">网页获取用户网络状态（JS接口）</a>

			<div class="header item">
				<i class="list layout icon"></i>六、自定义菜单
			</div>
			<a href="" class="item">自定义菜单创建接口</a>
			<a href="" class="item">自定义菜单查询接口</a>
			<a href="" class="item">自定义菜单删除接口</a>
			<a href="" class="item">自定义菜单事件推送</a>

			<div class="header item">
				<i class="list layout icon"></i>七、推广支持
			</div>
			<a href="" class="item">生成带参数的二维码</a>

			<div class="header item">
				<i class="list layout icon"></i>八、Weixin JS接口
			</div>
			<a href="" class="item">隐藏微信中网页右上角按钮</a>
			<a href="" class="item">隐藏微信中网页底部导航栏</a>
			<a href="" class="item">网页获取用户网络状态</a>

			<div class="header item">
				<i class="list layout icon"></i>九、开发者交流互动
			</div>
			<a href="" class="item">开发者问答系统</a>
			<a href="" class="item">接口调试工具</a>
			<a href="" class="item">接口体验测试号申请</a>
		</div>

		<div class="container" >
			<h1 class="ui center black aligned header">微信API for NodeJS</h1>
			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>

			<div class="ui header">
				欢迎大家加入QQ群：172342609 《微信 API For Nodejs》专用交流群
			</div>
			<div class="ui header">
				该API文档正在撰写中。。。敬请期待！
			</div>

			<!-- =============================================二、基础支持=================================================== -->
			<h2 class="ui red header">二、基础支持</h2>
			<h3 class="ui header" id="获取access_token">2.1 获取access_token</h3>
			<h4 class="ui header">getCacheAccessToken：获取缓存中的access_token（异步）</h4>
			<pre><code>weixin.getCacheAccessToken(function(data) {
	var access_token = data.access_token;
	var expires_in = data.expires_in;
});
</code></pre>
			<h4 class="ui header">getCacheAccessTokenSync：获取缓存中的access_token（同步）</h4>
			<pre><code>var data = weixin.getCacheAccessTokenSync();
var access_token = data.access_token;
var expires_in = data.expires_in;
</code></pre>																																																															

 <h4 class="ui header">getAccessToken：从微信服务器获取一个新的access_token</h4>
			<pre><code>weixin.getAccessToken(function(data) {
	var ret = JSON.parse(data);
	var access_token = ret.access_token;
	var expires_in = ret.expires_in;
});</code></pre>																																																															

 <h3 class="ui header" id="上传下载多媒体文件">2.4 上传下载多媒体文件</h3>

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>

			<!-- =============================================三、接受消息=================================================== -->
			<h2 class="ui red header">三、接受消息</h2>
			<h3 class="ui header" id="验证消息真实性">3.1 验证消息真实性</h3>
			<pre><code>weixin.checkSignature(req);</code></pre>
			<h3 class="ui header" id="接收普通消息">3.2 接受普通消息</h3>
			<h4 class="ui header">（1）文本消息</h4>
			<pre><code>weixin.on('textMsg', function(data) {
	console.log('>>>>>>>>> textMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400720067',
	msgType : 'text',
	content : '文本',
	msgId : '6016046878816470340'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> text </td>
					</tr>
					<tr>
						<td> content </td>
						<td> 文本消息内容 </td>
					</tr>
					<tr>
						<td> msgId </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（2）图片消息</h4>
			<pre><code>weixin.on('imageMsg', function(data) {
	console.log('>>>>>>>>> imageMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400719405',
	msgType : 'image',
	picUrl : 'http://mmbiz.qpic.cn/mmbiz/FNibvdZUiaod0RO17qicW4gtqdEjXMpD27Sic7qrRcQJJHSmoo6JxSnOCibuUDvSc8ibNZ3zVaTS3Yuib6IATaHLnIiaeg/0',
	msgId : '6016044035548120362',
	mediaId : 'b8SLXngmYMGXMNXjtMVcLGGW_BmXQbzwzTf2dbuxYEPD5EqPm_zDKI4SyIeoEbYc'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> image </td>
					</tr>
					<tr>
						<td> picUrl </td>
						<td> 图片链接 </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 图片消息媒体id，可以调用多媒体文件下载接口拉取数据。 </td>
					</tr>
					<tr>
						<td> msgId </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>
			<h4 class="ui header">（3）语音消息</h4>
			<pre><code>weixin.on('voiceMsg', function(data) {
	console.log('>>>>>>>>> voiceMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400719511',
	msgType : 'voice',
	mediaId : 'QYXeDMV2RBdPdmfBG-59jj3hEveQfVeRwfRxm0lJ-gYdE4cgDqotdjl5tmE-be0F',
	format : 'amr',
	msgId : '6016044490614112256'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 语音为voice </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 语音消息媒体id，可以调用多媒体文件下载接口拉取数据。 </td>
					</tr>
					<tr>
						<td> format </td>
						<td> 语音格式，如amr，speex等 </td>
					</tr>
					<tr>
						<td> msgID </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>
			<h4 class="ui header">（4）视频消息</h4>
			<pre><code>weixin.on('videoMsg', function(data) {
	console.log('>>>>>>>>> videoMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400719771',
	msgType : 'video',
	mediaId : '3_vygm3O4eOD-206YdWlD-2RZotkk3ATKhAzogJnYAcv2rWOGX-43mmjGAUhpgD3',
	thumbMediaId : '12qea8DjObLhIuZFeykdgAGT7AJ9M7GwYiOfIB1a_oVE2g6FTbUO4EDz1MrKykFO',
	msgId : '6016045607506150711'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 视频为video </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 视频消息媒体id，可以调用多媒体文件下载接口拉取数据。 </td>
					</tr>
					<tr>
						<td> thumbMediaId </td>
						<td> 视频消息缩略图的媒体id，可以调用多媒体文件下载接口拉取数据。 </td>
					</tr>
					<tr>
						<td> msgId </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>
			<h4 class="ui header">（5）地理位置消息</h4>
			<pre><code>weixin.on('locationMsg', function(data) {
	console.log('>>>>>>>>> locationMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400719863',
	msgType : 'location',
	location_X : '28.924880',
	location_Y : '121.265515',
	scale : '15',
	label : '台州市临海市川津路405号',
	msgId : '6016046002643141948'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> location </td>
					</tr>
					<tr>
						<td> location_X </td>
						<td> 地理位置维度 </td>
					</tr>
					<tr>
						<td> location_Y </td>
						<td> 地理位置经度 </td>
					</tr>
					<tr>
						<td> scale </td>
						<td> 地图缩放大小 </td>
					</tr>
					<tr>
						<td> label </td>
						<td> 地理位置信息 </td>
					</tr>
					<tr>
						<td> msgId </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>
			<h4 class="ui header">（6）链接消息</h4>
			<pre><code>weixin.on('linkMsg', function(data) {
	console.log('>>>>>>>>> linkMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>																																																															
			
 <h3 class="ui header" id="接收事件推送">3.3 接收事件推送</h3>
			<h4 class="ui header">（1） 关注/取消关注事件</h4>
			<pre><code>// 关注事件
weixin.on('subscribeEventMsg', function(data) {
	console.log('>>>>>>>>> subscribeEventMsg emit >>>>>>>>>');
	console.log(data);
});
// 取消关注事件
weixin.on('unsubscribeEventMsg', function(data) {
	console.log('>>>>>>>>> unsubscribeEventMsg emit >>>>>>>>>');
	console.log(data);
});
</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400724764',
	msgType : 'event',
	event : 'subscribe'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，subscribe(订阅)、unsubscribe(取消订阅) </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（2） 扫描带参数二维码事件</h4>

			<h4 class="ui header">（3）上报地理位置事件</h4>
			<p>
				用户同意上报地理位置后，每次进入公众号会话时，都会在进入时上报地理位置，或在进入会话后每5秒上报一次地理位置，公众号可以在公众平台网站中修改以上设置。上报地理位置时，微信会将上报地理位置事件推送到开发者填写的URL。
			</p>
			<pre><code>weixin.on('locationEventMsg', function(data) {
	console.log('>>>>>>>>> locationEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400724768',
	msgType : 'event',
	event : 'LOCATION',
	latitude : '28.927586',
	longitude : '121.260757',
	precision : '30.000000'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，LOCATION </td>
					</tr>
					<tr>
						<td> latitude </td>
						<td> 地理位置纬度 </td>
					</tr>
					<tr>
						<td> longitude </td>
						<td> 地理位置经度 </td>
					</tr>
					<tr>
						<td> precision </td>
						<td> 地理位置精度 </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（4）自定义菜单事件</h4>
			<p>
				用户点击自定义菜单后，微信会把点击事件推送给开发者，请注意，点击菜单弹出子菜单，不会产生上报。
			</p>
			<h4>点击菜单拉取消息时的事件推送</h4>
			<pre><code>weixin.on('clickEventMsg', function(data) {
	console.log('>>>>>>>>> clickEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400725592',
	msgType : 'event',
	event : 'CLICK',
	eventKey : 'ONE_KEY'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，CLICK </td>
					</tr>
					<tr>
						<td> eventKey </td>
						<td> 事件KEY值，与自定义菜单接口中KEY值对应 </td>
					</tr>
				</tbody>
			</table>
			<h4>点击菜单跳转链接时的事件推送</h4>
			<pre><code>weixin.on('viewEventMsg', function(data) {
	console.log('>>>>>>>>> viewEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400725790',
	msgType : 'event',
	event : 'VIEW',
	eventKey : 'http://www.baidu.com/'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，VIEW </td>
					</tr>
					<tr>
						<td> eventKey </td>
						<td> 事件KEY值，设置的跳转URL </td>
					</tr>
				</tbody>
			</table>

			<h3 class="ui header" id="接收语音识别结果">3.4 接收语音识别结果</h3>
			<p>
				开通语音识别功能，用户每次发送语音给公众号时，微信会在推送的语音消息XML数据包中，增加一个Recongnition字段。
			</p>
			<p>
				注：由于客户端缓存，开发者开启或者关闭语音识别功能，对新关注者立刻生效，对已关注用户需要24小时生效。开发者可以重新关注此帐号进行测试。
			</p>
			<pre><code>weixin.on('voiceMsg', function(data) {
	console.log('>>>>>>>>> voiceMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400726466',
	msgType : 'voice',
	mediaId : 'LJH6WzbKmSx9Nh0FVBgiGyQFM2cW7VwpFTt3r8ZNWVfoDW6yP6PkCWhPz6CuQ3om',
	format : 'amr',
	msgId : '6016074362111655936',
	recognition : '你好吗？'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> ToUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> FromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> CreateTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> MsgType </td>
						<td> 语音为voice </td>
					</tr>
					<tr>
						<td> MediaID </td>
						<td> 语音消息媒体id，可以调用多媒体文件下载接口拉取该媒体 </td>
					</tr>
					<tr>
						<td> Format </td>
						<td> 语音格式：amr </td>
					</tr>
					<tr>
						<td> Recognition </td>
						<td> 语音识别结果，UTF8编码 </td>
					</tr>
					<tr>
						<td> MsgID </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			<h2 class="ui red header">四、发送消息</h2>
			<h3 class="ui header" id="发送被动响应消息">4.1 发送被动响应消息</h3>
			<p>
				对于每一个POST请求，开发者在响应包（Get）中返回特定XML结构，对该消息进行响应（现支持回复文本、图片、图文、语音、视频、音乐）。请注意，回复图片等多媒体消息时需要预先上传多媒体文件到微信服务器，只支持认证服务号。
			</p>
			<h4 class="ui header">（1）回复文本消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听文本消息，并且在收到文本消息时，回复一段文本
weixin.on('textMsg', function(data) {
	console.log('>>>>>>>>> textMsg emit >>>>>>>>>');
	console.log(data);
	var msg = {
		toUserName : data.fromUserName,
		fromUserName : data.toUserName,
		msgType : 'text',
		content : '这是一段文本'
	};
	weixin.sendMsg(msg);
});</code></pre>
			<p>
				参数说明：（createTime属性已经默认添加，开发者不用手动添加）
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> text </td>
					</tr>
					<tr>
						<td> content </td>
						<td> 是 </td>
						<td> 回复的消息内容（换行：在content中能够换行，微信客户端就支持换行显示） </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（2）回复图片消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听图片消息，并且在收到图片消息时，回复收到的图片
weixin.on('imageMsg', function(data) {
	console.log('>>>>>>>>> imageMsg emit >>>>>>>>>');
	console.log(data);
	var msg = {
		toUserName : data.fromUserName,
		fromUserName : data.toUserName,
		msgType : 'image',
		mediaId : data.mediaId
	};
	weixin.sendMsg(msg);
});</code></pre>
			<p>
				参数说明：（createTime属性已经默认添加，开发者不用手动添加）
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> image </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 是 </td>
						<td> 通过上传多媒体文件，得到的id。 </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（3）回复语音消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听语音消息，并且在收到一条语音消息时，回复收到的语音消息
weixin.on('voiceMsg', function(data) {
	console.log('>>>>>>>>> voiceMsg emit >>>>>>>>>');
	console.log(data);
	var msg = {
		toUserName : data.fromUserName,
		fromUserName : data.toUserName,
		msgType : 'voice',
		mediaId : data.mediaId
	};
	weixin.sendMsg(msg);
});</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间戳 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> 语音，voice </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 是 </td>
						<td> 通过上传多媒体文件，得到的id </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（4）回复视频消息</h4>

			<h4 class="ui header">（5）回复音乐消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听文本消息，并且当用户发送了“音乐”关键字时，回复一条音乐消息
weixin.on('textMsg', function(data) {
    console.log('>>>>>>>>> textMsg emit >>>>>>>>>');
    console.log(data);
    switch (data.content) {
        case '音乐':
            var msg = {
                toUserName : data.fromUserName,
                fromUserName : data.toUserName,
                msgType : 'music',
                title : "这是音乐标题",
                description : "这是音乐描述",
                musicUrl : '音乐Url',
                thumbMediaId : 'MhKkAXP56io9Xx5hwzuVVzwWWSFH3LTrDl65efnD9BkXAvlc1Bjn8FhEqrWRa18f'
            };
            break;
    }
    weixin.sendMsg(msg);
});</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> music </td>
					</tr>
					<tr>
						<td> title </td>
						<td> 否 </td>
						<td> 音乐标题 </td>
					</tr>
					<tr>
						<td> description </td>
						<td> 否 </td>
						<td> 音乐描述 </td>
					</tr>
					<tr>
						<td> musicURL </td>
						<td> 否 </td>
						<td> 音乐链接 </td>
					</tr>
					<tr>
						<td> HQMusicUrl </td>
						<td> 否 </td>
						<td> 高质量音乐链接，WIFI环境优先使用该链接播放音乐 </td>
					</tr>
					<tr>
						<td> thumbMediaId </td>
						<td> 是 </td>
						<td> 缩略图的媒体id，通过上传多媒体文件，得到的id </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（6）回复图文消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听文本消息，并且当用户发送了“图文”关键字时，回复一条图文消息
weixin.on('textMsg', function(data) {
	console.log('>>>>>>>>> textMsg emit >>>>>>>>>');
	console.log(data);
	switch (data.content) {
		case '图文':
		var articles = [];
		articles[0] = {
			title : "每个Web开发者必备的9个软技能",
			description : "每个Web开发者除了精通技术，还应必备以下9个软技能：交流、倾听、适应、合作、积极的态度、有职业道德、判断/辨别、批判性思维和自负管理等",
			picUrl : "http://cms.csdnimg.cn/article/201404/01/5339fcde7d200.jpg",
			url : "http://www.csdn.net/article/2014-04-01/2819079-9-soft-skills-every-web-developer-should-master"
		};
		articles[1] = {
			title : "轻松打造品牌轻应用：实时Web App开发框架Clouda",
			description : "Clouda是百度历时两年共同研发的开源App技术框架，基于Node.js，简单易用，完美结合BAE，具备跨终端、云端统一、随动反馈和全实时等新一代技术能力。许多传统企业产品都通过Clouda开发品牌轻应用实现互联网化转型。",
			picUrl : "http://cms.csdnimg.cn/article/201403/07/53196741f0a1d_middle.jpg",
			url : "http://www.csdn.net/article/2014-03-07/2818676-baidu-clouda"
		};
		var msg = {
			toUserName : data.fromUserName,
			fromUserName : data.toUserName,
			msgType : 'news',
			articles : articles
		};
		break;
	}
	weixin.sendMsg(msg);
});</code></pre>									




			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> ToUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> FromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> CreateTime </td>
						<td> 是 </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> MsgType </td>
						<td> 是 </td>
						<td> news </td>
					</tr>
					<tr>
						<td> ArticleCount </td>
						<td> 是 </td>
						<td> 图文消息个数，限制为10条以内 </td>
					</tr>
					<tr>
						<td> Articles </td>
						<td> 是 </td>
						<td> 多条图文消息信息，默认第一个item为大图,注意，如果图文数超过10，则将会无响应 </td>
					</tr>
					<tr>
						<td> Title </td>
						<td> 否 </td>
						<td> 图文消息标题 </td>
					</tr>
					<tr>
						<td> Description </td>
						<td> 否 </td>
						<td> 图文消息描述 </td>
					</tr>
					<tr>
						<td> PicUrl </td>
						<td> 否 </td>
						<td> 图片链接，支持JPG、PNG格式，较好的效果为大图360*200，小图200*200 </td>
					</tr>
					<tr>
						<td> Url </td>
						<td> 否 </td>
						<td> 点击图文消息跳转链接 </td>
					</tr>
				</tbody>
			</table>

			<h3 class="ui header" id="发送客服消息">4.2 发送客服消息</h3>
			<p>
				当用户主动发消息给公众号的时候（包括发送信息、点击自定义菜单、订阅事件、扫描二维码事件、支付成功事件、用户维权），微信将会把消息数据推送给开发者，开发者在一段时间内（目前修改为48小时）可以调用客服消息接口，通过POST一个JSON数据包来发送消息给普通用户，在48小时内不限制发送次数。此接口主要用于客服等有人工消息处理环节的功能，方便开发者为用户提供更加优质的服务。
			</p>
			<h4 class="ui header">（1）发送文本消息</h4>

			<h4 class="ui header">（2）发送图片消息</h4>
			<h4 class="ui header">（3）发送语音消息</h4>
			<h4 class="ui header">（4）发送视频消息</h4>
			<h4 class="ui header">（5）发送音乐消息</h4>
			<h4 class="ui header">（6）发送图文消息</h4>

			<h3 class="ui header" id="高级群发接口">4.3 高级群发接口</h3>

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			<h2 class="ui red header">五、用户管理</h2>

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			<h2 class="ui red header">六、自定义菜单</h2>

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			<h2 class="ui red header">七、推广支持</h2>

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			<h2 class="ui red header">八、Weixin JS接口</h2>
		</div>

		<a href="https://github.com/silianlinyi/weixin-api" target="_blank">
			<img style="position: fixed; top: 0; right: 0; border: 0;z-index: 10;" src="img/1dbSqT9ykm.png" width="149" height="149" alt="Fork me on GitHub" data-pinit="registered">
		</a>

		<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
		<script type="text/javascript" src="js/semantic.js"></script>
		<script type="text/javascript" src="js/index.js"></script>
	</body>
</html>
