<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>微信API For NodeJS</title>
		<link rel="stylesheet" type="text/css" href="css/semantic.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/common.css"/>
		<link rel="stylesheet" type="text/css" href="styles/monokai.css"/>
		<script type="text/javascript" charset="utf-8" src="js/highlight.pack.js"></script>
		<script>
			hljs.initHighlightingOnLoad();
		</script>
	</head>
	<body>
		
		<div class="ui fixed transparent inverted red large menu">
			<a class="item"><i class="code icon"></i> 5分钟快速开发 </a>
			<a class="active item" href="/weixin-api/"><i class="home icon"></i> API 文档 </a>
			<a class="item"><i class="user icon"></i> 关于我 </a>
		</div>

		<!-- 侧边导航栏 -->
		<div class="ui left sidebar vertical menu active" id="sidebar">
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>新手接入
				</div>
				<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97" target="_blank" class="item">接入指南</a>
				<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B%E4%BB%8B%E7%BB%8D" target="_blank" class="item">典型案例介绍</a>
				<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E5%BC%80%E5%8F%91%E8%80%85%E8%A7%84%E8%8C%83" target="_blank" class="item">开发者规范</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>基础支持
				</div>
				<a href="#获取access_token" class="item">获取access_token</a>
				<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E5%85%A8%E5%B1%80%E8%BF%94%E5%9B%9E%E7%A0%81%E8%AF%B4%E6%98%8E" target="_blank" class="item">全局返回码说明</a>
				<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E6%8E%A5%E5%8F%A3%E9%A2%91%E7%8E%87%E9%99%90%E5%88%B6%E8%AF%B4%E6%98%8E" target="_blank" class="item">接口频率限制说明</a>
				<a href="#上传下载多媒体文件" class="item">上传下载多媒体文件</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>接受消息
				</div>
				<a href="#验证消息真实性" class="item">验证消息真实性</a>
				<a href="#接收普通消息" class="item">接收普通消息</a>
				<a href="#接收事件推送" class="item">接收事件推送</a>
				<a href="#接收语音识别结果" class="item">接收语音识别结果</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>发送消息
				</div>
				<a href="#发送被动响应消息" class="item">发送被动响应消息</a>
				<a href="#发送客服消息" class="item">发送客服消息</a>
				<a href="#高级群发接口" class="item">高级群发接口</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>用户管理
				</div>
				<a href="#分组管理接口" class="item">分组管理接口</a>
				<a href="#获取用户基本信息" class="item">获取用户基本信息</a>
				<a href="#获取关注者列表" class="item">获取关注者列表</a>
				<a href="#获取用户地理位置" class="item">获取用户地理位置</a>
				<a href="#网页授权获取用户基本信息" class="item">网页授权获取用户基本信息</a>
				<a href="#网页获取用户网络状态" class="item">网页获取用户网络状态（JS接口）</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>多客服功能
				</div>
				<a href="" class="item">将消息转发到多客服</a>
				<a href="" class="item">获取客服聊天记录</a>
				<a href="" class="item">PC客户端自定义插件接口</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>自定义菜单
				</div>
				<a href="#自定义菜单创建接口" class="item">自定义菜单创建接口</a>
				<a href="#自定义菜单查询接口" class="item">自定义菜单查询接口</a>
				<a href="#自定义菜单删除接口" class="item">自定义菜单删除接口</a>
				<a href="#自定义菜单事件推送" class="item">自定义菜单事件推送</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>推广支持
				</div>
				<a href="#生成带参数的二维码" class="item">生成带参数的二维码</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>微信小店
				</div>
				<a href="#" class="item">微信小店接口</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>Weixin JS接口
				</div>
				<a target="_blank" href="http://mp.weixin.qq.com/wiki/index.php?title=%E9%9A%90%E8%97%8F%E5%BE%AE%E4%BF%A1%E4%B8%AD%E7%BD%91%E9%A1%B5%E5%8F%B3%E4%B8%8A%E8%A7%92%E6%8C%89%E9%92%AE" class="item">隐藏微信中网页右上角按钮</a>
				<a target="_blank" href="http://mp.weixin.qq.com/wiki/index.php?title=%E9%9A%90%E8%97%8F%E5%BE%AE%E4%BF%A1%E4%B8%AD%E7%BD%91%E9%A1%B5%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%E6%A0%8F" class="item">隐藏微信中网页底部导航栏</a>
				<a target="_blank" href="http://mp.weixin.qq.com/wiki/index.php?title=%E7%BD%91%E9%A1%B5%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E7%BD%91%E7%BB%9C%E7%8A%B6%E6%80%81" class="item">网页获取用户网络状态</a>
			</div>
			
			<div class="items">
				<div class="header item">
					<i class="list layout icon"></i>开发者交流互动
				</div>
				<a target="_blank" href="http://mp.weixin.qq.com/qa/index.php?qa=questions" class="item">开发者问答系统</a>
				<a target="_blank" href="http://mp.weixin.qq.com/debug/" class="item">接口调试工具</a>
				<a target="_blank" href="http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login" class="item">接口体验测试号申请</a>
			</div>
		</div>
		<!-- end 侧边导航栏 -->

		<div class="container" >
			<h1 class="ui center black aligned header">微信API for NodeJS</h1>
			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>

			<div class="ui header">
				欢迎大家加入QQ群：172342609 《微信 API For Nodejs》专用交流群
			</div>
			<div class="ui header">
				该API文档正在撰写中。。。敬请期待！
			</div>

			<!-- =============================================基础支持=================================================== -->
			<h2 class="ui red header">基础支持</h2>
			<h3 class="ui header" id="获取access_token">1 获取access_token</h3>
			<p>access_token是公众号的全局唯一票据，公众号调用各接口时都需使用access_token。正常情况下access_token有效期为7200秒，重复获取将导致上次获取的access_token失效。
				由于获取access_token的api调用次数非常有限，建议开发者全局存储与更新access_token，频繁刷新access_token会导致api调用受限，影响自身业务。</p>
			<p>请开发者注意，由于技术升级，公众平台的开发接口的access_token长度将增长，其存储至少要保留512个字符空间。此修改将在1个月后生效，请开发者尽快修改兼容。</p>
			<p>公众号可以使用AppID和AppSecret调用本接口来获取access_token。AppID和AppSecret可在开发模式中获得（需要已经成为开发者，且帐号没有异常状态）。注意调用所有微信接口时均需使用https协议。</p>
			
			<h4 class="ui header">getCacheAccessToken：获取缓存中的access_token（异步）</h4>
			<pre><code>weixin.getCacheAccessToken(function(data) {
	var access_token = data.access_token;
	var expires_in = data.expires_in;
});
</code></pre>
			<h4 class="ui header">getCacheAccessTokenSync：获取缓存中的access_token（同步）</h4>
			<pre><code>var data = weixin.getCacheAccessTokenSync();
var access_token = data.access_token;
var expires_in = data.expires_in;
</code></pre>																																																																																	

 <h4 class="ui header">getAccessToken：从微信服务器获取一个新的access_token</h4>
			<pre><code>weixin.getAccessToken(function(data) {
	var ret = JSON.parse(data);
	var access_token = ret.access_token;
	var expires_in = ret.expires_in;
});</code></pre>
			<p>返回说明：</p>
			<p>正常情况下，微信会返回下述JSON数据包给公众号：</p>
			<pre><code>{"access_token":"ACCESS_TOKEN","expires_in":7200}</code></pre>
			<p>返回结果参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> access_token </td>
						<td> 获取到的凭证 </td>
					</tr>
					<tr>
						<td> expires_in </td>
						<td> 凭证有效时间，单位：秒 </td>
					</tr>
				</tbody>
			</table>
			<p>错误时微信会返回错误码等信息，JSON数据包示例如下（该示例为AppID无效错误）:</p>
			<pre><code>{"errcode":40013,"errmsg":"invalid appid"}</code></pre>
			
			<h3 class="ui header"><a href="http://mp.weixin.qq.com/wiki/index.php?title=%E5%85%A8%E5%B1%80%E8%BF%94%E5%9B%9E%E7%A0%81%E8%AF%B4%E6%98%8E" target="_blank">2 全局返回码说明（详见微信开发者文档）</a></h3>
			<h3 class="ui header"><a href="http://mp.weixin.qq.com/wiki/index.php?title=%E6%8E%A5%E5%8F%A3%E9%A2%91%E7%8E%87%E9%99%90%E5%88%B6%E8%AF%B4%E6%98%8E" target="_blank">3 接口频率限制说明（详见微信开发者文档）</a></h3>
 			<h3 class="ui header" id="上传下载多媒体文件">4 上传下载多媒体文件（TODO）</h3>

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>

			<!-- =============================================接受消息=================================================== -->
			<h2 class="ui red header">接受消息</h2>
			<h3 class="ui header" id="验证消息真实性">1 验证消息真实性</h3>
			<pre><code>// 接入验证
app.get('/verify', function(req, res) {
	if (weixin.checkSignature(req)) {
		res.send(200, req.query.echostr);
	} else {
		res.send(200, 'fail');
	}
});</code></pre>
			<h3 class="ui header" id="接收普通消息">2 接受普通消息</h3>
			<p>当普通微信用户向公众账号发消息时，微信服务器将POST消息的XML数据包到开发者填写的URL上。各消息类型的推送XML数据包结构如下。</p>
			<h4 class="ui header">（1）文本消息</h4>
			<pre><code>// 监听文本消息
weixin.on('textMsg', function(data) {
	console.log('>>>>>>>>> textMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400720067',
	msgType : 'text',
	content : '文本',
	msgId : '6016046878816470340'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> text </td>
					</tr>
					<tr>
						<td> content </td>
						<td> 文本消息内容 </td>
					</tr>
					<tr>
						<td> msgId </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（2）图片消息</h4>
			<pre><code>// 监听图片消息
weixin.on('imageMsg', function(data) {
	console.log('>>>>>>>>> imageMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400719405',
	msgType : 'image',
	picUrl : 'http://mmbiz.qpic.cn/mmbiz/FNibvdZUiaod0RO17qicW4gtqdEjXMpD27Sic7qrRcQJJHSmoo6JxSnOCibuUDvSc8ibNZ3zVaTS3Yuib6IATaHLnIiaeg/0',
	msgId : '6016044035548120362',
	mediaId : 'b8SLXngmYMGXMNXjtMVcLGGW_BmXQbzwzTf2dbuxYEPD5EqPm_zDKI4SyIeoEbYc'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> image </td>
					</tr>
					<tr>
						<td> picUrl </td>
						<td> 图片链接 </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 图片消息媒体id，可以调用多媒体文件下载接口拉取数据。 </td>
					</tr>
					<tr>
						<td> msgId </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>
			<h4 class="ui header">（3）语音消息</h4>
			<pre><code>// 监听语音消息
weixin.on('voiceMsg', function(data) {
	console.log('>>>>>>>>> voiceMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400719511',
	msgType : 'voice',
	mediaId : 'QYXeDMV2RBdPdmfBG-59jj3hEveQfVeRwfRxm0lJ-gYdE4cgDqotdjl5tmE-be0F',
	format : 'amr',
	msgId : '6016044490614112256'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 语音为voice </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 语音消息媒体id，可以调用多媒体文件下载接口拉取数据。 </td>
					</tr>
					<tr>
						<td> format </td>
						<td> 语音格式，如amr，speex等 </td>
					</tr>
					<tr>
						<td> msgID </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>
			<h4 class="ui header">（4）视频消息</h4>
			<pre><code>// 监听视频消息
weixin.on('videoMsg', function(data) {
	console.log('>>>>>>>>> videoMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400719771',
	msgType : 'video',
	mediaId : '3_vygm3O4eOD-206YdWlD-2RZotkk3ATKhAzogJnYAcv2rWOGX-43mmjGAUhpgD3',
	thumbMediaId : '12qea8DjObLhIuZFeykdgAGT7AJ9M7GwYiOfIB1a_oVE2g6FTbUO4EDz1MrKykFO',
	msgId : '6016045607506150711'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 视频为video </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 视频消息媒体id，可以调用多媒体文件下载接口拉取数据。 </td>
					</tr>
					<tr>
						<td> thumbMediaId </td>
						<td> 视频消息缩略图的媒体id，可以调用多媒体文件下载接口拉取数据。 </td>
					</tr>
					<tr>
						<td> msgId </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>
			<h4 class="ui header">（5）地理位置消息</h4>
			<pre><code>// 监听地理位置消息
weixin.on('locationMsg', function(data) {
	console.log('>>>>>>>>> locationMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400719863',
	msgType : 'location',
	location_X : '28.924880',
	location_Y : '121.265515',
	scale : '15',
	label : '浙江省杭州市滨江区东方郡',
	msgId : '6016046002643141948'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> location </td>
					</tr>
					<tr>
						<td> location_X </td>
						<td> 地理位置维度 </td>
					</tr>
					<tr>
						<td> location_Y </td>
						<td> 地理位置经度 </td>
					</tr>
					<tr>
						<td> scale </td>
						<td> 地图缩放大小 </td>
					</tr>
					<tr>
						<td> label </td>
						<td> 地理位置信息 </td>
					</tr>
					<tr>
						<td> msgId </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>
			<h4 class="ui header">（6）链接消息</h4>
			<pre><code>// 监听链接消息
weixin.on('linkMsg', function(data) {
	console.log('>>>>>>>>> linkMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_9515ed00f8e0',
	fromUserName : 'oZ2t3jlm5cpXNF-y-IO0Y5PWTwzc',
	createTime : '1400762498',
	msgType : 'link',
	title : '吴晓波频道',
	description : 'http://stage.lanshizi.com/articles',
	url : 'http://stage.lanshizi.com/articles',
	msgId : '6016229118573443885'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 接收方微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方微信号，若为普通用户，则是一个OpenID </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，link </td>
					</tr>
					<tr>
						<td> title </td>
						<td> 消息标题 </td>
					</tr>
					<tr>
						<td> description </td>
						<td> 消息描述 </td>
					</tr>
					<tr>
						<td> url </td>
						<td> 消息链接 </td>
					</tr>
					<tr>
						<td> msgId </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>

			<h3 class="ui header" id="接收事件推送">3 接收事件推送</h3>
			<h4 class="ui header">（1） 关注/取消关注事件</h4>
			<p>用户在关注与取消关注公众号时，微信会把这个事件推送到开发者填写的URL。方便开发者给用户下发欢迎消息或者做帐号的解绑。</p>
			<pre><code>// 关注事件
weixin.on('subscribeEventMsg', function(data) {
	console.log('>>>>>>>>> subscribeEventMsg emit >>>>>>>>>');
	console.log(data);
});
// 取消关注事件
weixin.on('unsubscribeEventMsg', function(data) {
	console.log('>>>>>>>>> unsubscribeEventMsg emit >>>>>>>>>');
	console.log(data);
});
</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400724764',
	msgType : 'event',
	event : 'subscribe'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，subscribe(订阅)、unsubscribe(取消订阅) </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（2） 扫描带参数二维码事件</h4>
			<p>用户扫描带场景值二维码时，可能推送以下两种事件：</p>
			<ol>
				<li>如果用户还未关注公众号，则用户可以关注公众号，关注后微信会将带场景值关注事件推送给开发者。</li>
				<li>如果用户已经关注公众号，则微信会将带场景值扫描事件推送给开发者。</li>
			</ol>
			<p><strong>1. 用户未关注时，进行关注后的事件推送</strong></p>
			<pre><code>weixin.on('subscribeEventMsg', function(data) {
	console.log('>>>>>>>>> subscribeEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>data参数示例：</p>
			<pre><code>{ 
	ToUserName: [ 'gh_9515ed00f8e0' ],
	FromUserName: [ 'oZ2t3jhhQkQcF5p3qqItXc32CfDY' ],
	CreateTime: [ '1402060401' ],
	MsgType: [ 'event' ],
	Event: [ 'subscribe' ],
	EventKey: [ 'qrscene_123' ],
	Ticket:['gQGF8DoAAAAAAAAAASxodHRwOi8vd2VpeGluLnFxLmNvbS9xL0hYV1o5YnJsRGZCME16ck8yVm1qAAIEzZ1_UwMEAAAAAA==']
}</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，subscribe </td>
					</tr>
					<tr>
						<td> eventKey </td>
						<td> 事件KEY值，qrscene_为前缀，后面为二维码的参数值 </td>
					</tr>
					<tr>
						<td> ticket </td>
						<td> 二维码的ticket，可用来换取二维码图片 </td>
					</tr>
				</tbody>
			</table>
			
			<p><strong>2. 用户已关注时的事件推送</strong></p>
			<pre><code>weixin.on("scanEventMsg", function(data) {
	console.log('>>>>>>>>> scanEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>data参数示例：</p>
			<pre><code>{ 
	toUserName: 'gh_9515ed00f8e0',
	fromUserName: 'oZ2t3jhhQkQcF5p3qqItXc32CfDY',
	createTime: '1402061186',
	msgType: 'event',
	event: 'SCAN',
	eventKey: '123',
	ticket: 'gQGF8DoAAAAAAAAAASxodHRwOi8vd2VpeGluLnFxLmNvbS9xL0hYV1o5YnJsRGZCME16ck8yVm1qAAIEzZ1_UwMEAAAAAA=='
}</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，SCAN </td>
					</tr>
					<tr>
						<td> eventKey </td>
						<td> 事件KEY值，是一个32位无符号整数，即创建二维码时的二维码scene_id </td>
					</tr>
					<tr>
						<td> ticket </td>
						<td> 二维码的ticket，可用来换取二维码图片 </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（3）上报地理位置事件</h4>
			<p>
				用户同意上报地理位置后，每次进入公众号会话时，都会在进入时上报地理位置，或在进入会话后每5秒上报一次地理位置，公众号可以在公众平台网站中修改以上设置。上报地理位置时，微信会将上报地理位置事件推送到开发者填写的URL。
			</p>
			<pre><code>weixin.on('locationEventMsg', function(data) {
	console.log('>>>>>>>>> locationEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400724768',
	msgType : 'event',
	event : 'LOCATION',
	latitude : '28.927586',
	longitude : '121.260757',
	precision : '30.000000'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，LOCATION </td>
					</tr>
					<tr>
						<td> latitude </td>
						<td> 地理位置纬度 </td>
					</tr>
					<tr>
						<td> longitude </td>
						<td> 地理位置经度 </td>
					</tr>
					<tr>
						<td> precision </td>
						<td> 地理位置精度 </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（4）自定义菜单事件</h4>
			<p>
				用户点击自定义菜单后，微信会把点击事件推送给开发者，请注意，点击菜单弹出子菜单，不会产生上报。
			</p>
			<h4>点击菜单拉取消息时的事件推送</h4>
			<pre><code>weixin.on('clickEventMsg', function(data) {
	console.log('>>>>>>>>> clickEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400725592',
	msgType : 'event',
	event : 'CLICK',
	eventKey : 'ONE_KEY'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，CLICK </td>
					</tr>
					<tr>
						<td> eventKey </td>
						<td> 事件KEY值，与自定义菜单接口中KEY值对应 </td>
					</tr>
				</tbody>
			</table>
			<h4>点击菜单跳转链接时的事件推送</h4>
			<pre><code>weixin.on('viewEventMsg', function(data) {
	console.log('>>>>>>>>> viewEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400725790',
	msgType : 'event',
	event : 'VIEW',
	eventKey : 'http://www.baidu.com/'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，VIEW </td>
					</tr>
					<tr>
						<td> eventKey </td>
						<td> 事件KEY值，设置的跳转URL </td>
					</tr>
				</tbody>
			</table>

			<h3 class="ui header" id="接收语音识别结果">4 接收语音识别结果</h3>
			<p>
				开通语音识别功能，用户每次发送语音给公众号时，微信会在推送的语音消息XML数据包中，增加一个Recongnition字段。
			</p>
			<p>
				注：由于客户端缓存，开发者开启或者关闭语音识别功能，对新关注者立刻生效，对已关注用户需要24小时生效。开发者可以重新关注此帐号进行测试。
			</p>
			<pre><code>weixin.on('voiceMsg', function(data) {
	console.log('>>>>>>>>> voiceMsg emit >>>>>>>>>');
	console.log(data);
	// TODO
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400726466',
	msgType : 'voice',
	mediaId : 'LJH6WzbKmSx9Nh0FVBgiGyQFM2cW7VwpFTt3r8ZNWVfoDW6yP6PkCWhPz6CuQ3om',
	format : 'amr',
	msgId : '6016074362111655936',
	recognition : '你好吗？'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> ToUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> FromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> CreateTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> MsgType </td>
						<td> 语音为voice </td>
					</tr>
					<tr>
						<td> MediaID </td>
						<td> 语音消息媒体id，可以调用多媒体文件下载接口拉取该媒体 </td>
					</tr>
					<tr>
						<td> Format </td>
						<td> 语音格式：amr </td>
					</tr>
					<tr>
						<td> Recognition </td>
						<td> 语音识别结果，UTF8编码 </td>
					</tr>
					<tr>
						<td> MsgID </td>
						<td> 消息id，64位整型 </td>
					</tr>
				</tbody>
			</table>

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			<h2 class="ui red header">发送消息</h2>
			<h3 class="ui header" id="发送被动响应消息">1 发送被动响应消息</h3>
			<p>
				对于每一个POST请求，开发者在响应包（Get）中返回特定XML结构，对该消息进行响应（现支持回复文本、图片、图文、语音、视频、音乐）。请注意，回复图片等多媒体消息时需要预先上传多媒体文件到微信服务器，只支持认证服务号。
			</p>
			<h4 class="ui header">（1）回复文本消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听文本消息，并且在收到文本消息时，回复一段文本
weixin.on('textMsg', function(data) {
	console.log('>>>>>>>>> textMsg emit >>>>>>>>>');
	console.log(data);
	var msg = {
		toUserName : data.fromUserName,
		fromUserName : data.toUserName,
		msgType : 'text',
		content : '这是一段文本'
	};
	weixin.sendMsg(msg);
});</code></pre>
			<p>
				参数说明：（createTime属性已经默认添加，开发者不用手动添加）
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> text </td>
					</tr>
					<tr>
						<td> content </td>
						<td> 是 </td>
						<td> 回复的消息内容（换行：在content中能够换行，微信客户端就支持换行显示） </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（2）回复图片消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听图片消息，并且在收到图片消息时，回复收到的图片
weixin.on('imageMsg', function(data) {
	console.log('>>>>>>>>> imageMsg emit >>>>>>>>>');
	console.log(data);
	var msg = {
		toUserName : data.fromUserName,
		fromUserName : data.toUserName,
		msgType : 'image',
		mediaId : data.mediaId
	};
	weixin.sendMsg(msg);
});</code></pre>
			<p>
				参数说明：（createTime属性已经默认添加，开发者不用手动添加）
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> image </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 是 </td>
						<td> 通过上传多媒体文件，得到的id。 </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（3）回复语音消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听语音消息，并且在收到一条语音消息时，回复收到的语音消息
weixin.on('voiceMsg', function(data) {
	console.log('>>>>>>>>> voiceMsg emit >>>>>>>>>');
	console.log(data);
	var msg = {
		toUserName : data.fromUserName,
		fromUserName : data.toUserName,
		msgType : 'voice',
		mediaId : data.mediaId
	};
	weixin.sendMsg(msg);
});</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间戳 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> 语音，voice </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 是 </td>
						<td> 通过上传多媒体文件，得到的id </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（4）回复视频消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听视频消息，并且在收到一条视频消息时，回复一条视频消息
weixin.on('videoMsg', function(data) {
	console.log('>>>>>>>>> videoMsg emit >>>>>>>>>');
	console.log(data);
	var msg = {
		toUserName : data.fromUserName,
		fromUserName : data.toUserName,
		msgType : 'video',
		title : '这是视频的标题',
		description : '这是视频的描述',
		mediaId : '7bTTH39M91xDI6ItEtN13bYrejJEUPWgrK5NTrqltHdOBXEHA95VFAGFxRlhalxY'
	};
	weixin.sendMsg(msg);
});</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> video </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 是 </td>
						<td> 通过上传多媒体文件，得到的id </td>
					</tr>
					<tr>
						<td> title </td>
						<td> 否 </td>
						<td> 视频消息的标题 </td>
					</tr>
					<tr>
						<td> description </td>
						<td> 否 </td>
						<td> 视频消息的描述 </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（5）回复音乐消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听文本消息，并且当用户发送了“音乐”关键字时，回复一条音乐消息
weixin.on('textMsg', function(data) {
    console.log('>>>>>>>>> textMsg emit >>>>>>>>>');
    console.log(data);
    switch (data.content) {
        case '音乐':
            var msg = {
                toUserName : data.fromUserName,
                fromUserName : data.toUserName,
                msgType : 'music',
                title : "这是音乐标题",
                description : "这是音乐描述",
                musicUrl : '音乐Url',
                thumbMediaId : 'MhKkAXP56io9Xx5hwzuVVzwWWSFH3LTrDl65efnD9BkXAvlc1Bjn8FhEqrWRa18f'
            };
            break;
    }
    weixin.sendMsg(msg);
});</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> music </td>
					</tr>
					<tr>
						<td> title </td>
						<td> 否 </td>
						<td> 音乐标题 </td>
					</tr>
					<tr>
						<td> description </td>
						<td> 否 </td>
						<td> 音乐描述 </td>
					</tr>
					<tr>
						<td> musicURL </td>
						<td> 否 </td>
						<td> 音乐链接 </td>
					</tr>
					<tr>
						<td> HQMusicUrl </td>
						<td> 否 </td>
						<td> 高质量音乐链接，WIFI环境优先使用该链接播放音乐 </td>
					</tr>
					<tr>
						<td> thumbMediaId </td>
						<td> 是 </td>
						<td> 缩略图的媒体id，通过上传多媒体文件，得到的id </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（6）回复图文消息</h4>
			<p>
				示例：
			</p>
			<pre><code>// 监听文本消息，并且当用户发送了“图文”关键字时，回复一条图文消息
weixin.on('textMsg', function(data) {
	console.log('>>>>>>>>> textMsg emit >>>>>>>>>');
	console.log(data);
	switch (data.content) {
		case '图文':
		var articles = [];
		articles[0] = {
			title : "每个Web开发者必备的9个软技能",
			description : "每个Web开发者除了精通技术，还应必备以下9个软技能：交流、倾听、适应、合作、积极的态度、有职业道德、判断/辨别、批判性思维和自负管理等",
			picUrl : "http://cms.csdnimg.cn/article/201404/01/5339fcde7d200.jpg",
			url : "http://www.csdn.net/article/2014-04-01/2819079-9-soft-skills-every-web-developer-should-master"
		};
		articles[1] = {
			title : "轻松打造品牌轻应用：实时Web App开发框架Clouda",
			description : "Clouda是百度历时两年共同研发的开源App技术框架，基于Node.js，简单易用，完美结合BAE，具备跨终端、云端统一、随动反馈和全实时等新一代技术能力。",
			picUrl : "http://cms.csdnimg.cn/article/201403/07/53196741f0a1d_middle.jpg",
			url : "http://www.csdn.net/article/2014-03-07/2818676-baidu-clouda"
		};
		var msg = {
			toUserName : data.fromUserName,
			fromUserName : data.toUserName,
			msgType : 'news',
			articles : articles
		};
		break;
	}
	weixin.sendMsg(msg);
});</code></pre>																											

			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 接收方帐号（收到的OpenID） </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 是 </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 是 </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> news </td>
					</tr>
					<tr>
						<td> articleCount </td>
						<td> 是 </td>
						<td> 图文消息个数，限制为10条以内 </td>
					</tr>
					<tr>
						<td> articles </td>
						<td> 是 </td>
						<td> 多条图文消息信息，默认第一个item为大图,注意，如果图文数超过10，则将会无响应 </td>
					</tr>
					<tr>
						<td> title </td>
						<td> 否 </td>
						<td> 图文消息标题 </td>
					</tr>
					<tr>
						<td> description </td>
						<td> 否 </td>
						<td> 图文消息描述 </td>
					</tr>
					<tr>
						<td> picUrl </td>
						<td> 否 </td>
						<td> 图片链接，支持JPG、PNG格式，较好的效果为大图360*200，小图200*200 </td>
					</tr>
					<tr>
						<td> url </td>
						<td> 否 </td>
						<td> 点击图文消息跳转链接 </td>
					</tr>
				</tbody>
			</table>

			<h3 class="ui header" id="发送客服消息">2 发送客服消息</h3>
			<p>
				当用户主动发消息给公众号的时候（包括发送信息、点击自定义菜单、订阅事件、扫描二维码事件、支付成功事件、用户维权），微信将会把消息数据推送给开发者，开发者在一段时间内（目前修改为48小时）可以调用客服消息接口，通过POST一个JSON数据包来发送消息给普通用户，在48小时内不限制发送次数。此接口主要用于客服等有人工消息处理环节的功能，方便开发者为用户提供更加优质的服务。
			</p>
			<h4 class="ui header">（1）发送文本消息</h4>
			<p>
				示例：
			</p>
			<pre><code>weixin.sendCustomMsg({
	toUserName : 'OPENID',
	msgType : 'text',
	content : "这是文本内容"
}, function(data) {
	console.log(data);
});</code></pre>
			<p>
				如果发送成功，第二个参数回调函数data返回结果：
			</p>
			<pre><code>{ errcode: 0, errmsg: 'ok' }</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 普通用户openid </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> 消息类型，text </td>
					</tr>
					<tr>
						<td> content </td>
						<td> 是 </td>
						<td> 文本消息内容（如果在文本内容中需要换行，使用\n） </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（2）发送图片消息</h4>
			<p>
				示例：
			</p>
			<pre><code>weixin.sendCustomMsg({
	toUserName: 'OPENID',
	msgType: 'image',
	mediaId: 'MEDIA_ID'
}, function(data) {
	console.log(data);
});</code></pre>
			<p>
				如果发送成功，第二个参数回调函数data返回结果：
			</p>
			<pre><code>{ errcode: 0, errmsg: 'ok' }</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 普通用户openid </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> 消息类型，image </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 是 </td>
						<td> 发送的图片的媒体ID </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（3）发送语音消息</h4>
			<p>
				示例：
			</p>
			<pre><code>weixin.sendCustomMsg({
	toUserName : 'OPENID',
	msgType : 'voice',
	mediaId : 'MEDIA_ID'
}, function(data) {
	console.log(data);
});</code></pre>
			<p>
				如果发送成功，第二个参数回调函数data返回结果：
			</p>
			<pre><code>{ errcode: 0, errmsg: 'ok' }</code></pre>			
			

			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 普通用户openid </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> 消息类型，voice </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 是 </td>
						<td> 发送的语音的媒体ID </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（4）发送视频消息</h4>
			<p>
				示例：
			</p>
			<pre><code>weixin.sendCustomMsg({
	toUserName : 'OPENID',
	msgType : 'video',
	title: 'This is video title.',
	description: 'This is video description.',
	mediaId : 'MEDIA_ID'
}, function(data) {
	console.log(data);
});</code></pre>
			<p>
				如果发送成功，第二个参数回调函数data返回结果：
			</p>
			<pre><code>{ errcode: 0, errmsg: 'ok' }</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 普通用户openid </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> 消息类型，video </td>
					</tr>
					<tr>
						<td> mediaId </td>
						<td> 是 </td>
						<td> 发送的视频的媒体ID </td>
					</tr>
					<tr>
						<td> title </td>
						<td> 否 </td>
						<td> 视频消息的标题 </td>
					</tr>
					<tr>
						<td> description </td>
						<td> 否 </td>
						<td> 视频消息的描述 </td>
					</tr>
				</tbody>
			</table>

			<h4 class="ui header">（5）发送音乐消息</h4>
			<p>示例：</p>
			<pre><code>weixin.sendCustomMsg({
	toUserName : 'OPENID',
	msgType : 'music',
	title : "MUSIC_TITLE",
	description : "MUSIC_DESCRIPTION",
	musicUrl : "MUSIC_URL",
	HQMusicUrl : "HQ_MUSIC_URL",
	thumbMediaId : "THUMB_MEDIA_ID"
}, function(data) {
	console.log(data);
});</code></pre>
			<p>
				如果发送成功，第二个参数回调函数data返回结果：
			</p>
			<pre><code>{ errcode: 0, errmsg: 'ok' }</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 普通用户openid </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> 消息类型，music </td>
					</tr>
					<tr>
						<td> title </td>
						<td> 否 </td>
						<td> 音乐标题 </td>
					</tr>
					<tr>
						<td> description </td>
						<td> 否 </td>
						<td> 音乐描述 </td>
					</tr>
					<tr>
						<td> musicUrl </td>
						<td> 是 </td>
						<td> 音乐链接 </td>
					</tr>
					<tr>
						<td> HQMusicUrl </td>
						<td> 是 </td>
						<td> 高品质音乐链接，wifi环境优先使用该链接播放音乐 </td>
					</tr>
					<tr>
						<td> thumbMediaId </td>
						<td> 是 </td>
						<td> 缩略图的媒体ID </td>
					</tr>
				</tbody>
			</table>
			
			<h4 class="ui header">（6）发送图文消息</h4>
			<p>图文消息条数限制在10条以内，注意，如果图文数超过10，则将会无响应。</p>
			<p>示例：</p>
			<pre><code>weixin.sendCustomMsg({
	toUserName : 'OPENID',
	msgType : 'news',

	articles : [{
		title : "每个Web开发者必备的9个软技能",
		description : "每个Web开发者除了精通技术，还应必备以下9个软技能：交流、倾听、适应、合作、积极的态度、有职业道德、判断/辨别、批判性思维和自负管理等",
		picurl : "http://cms.csdnimg.cn/article/201404/01/5339fcde7d200.jpg",
		url : "http://www.csdn.net/article/2014-04-01/2819079-9-soft-skills-every-web-developer-should-master"
	}, {
		title : "轻松打造品牌轻应用：实时Web App开发框架Clouda",
		description : "Clouda是百度历时两年共同研发的开源App技术框架，基于Node.js，简单易用，完美结合BAE，具备跨终端、云端统一、随动反馈和全实时等新一代技术能力。",
		picurl : "http://cms.csdnimg.cn/article/201403/07/53196741f0a1d_middle.jpg",
		url : "http://www.csdn.net/article/2014-03-07/2818676-baidu-clouda"
	}]

}, function(data) {
	console.log(data);
});</code></pre>
			<p>
				如果发送成功，第二个参数回调函数data返回结果：
			</p>
			<pre><code>{ errcode: 0, errmsg: 'ok' }</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td> 是 </td>
						<td> 普通用户openid </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 是 </td>
						<td> 消息类型，news </td>
					</tr>
					<tr>
						<td> title </td>
						<td> 否 </td>
						<td> 标题 </td>
					</tr>
					<tr>
						<td> description </td>
						<td> 否 </td>
						<td> 描述 </td>
					</tr>
					<tr>
						<td> url </td>
						<td> 否 </td>
						<td> 点击后跳转的链接 </td>
					</tr>
					<tr>
						<td> picurl </td>
						<td> 否 </td>
						<td> 图文消息的图片链接，支持JPG、PNG格式，较好的效果为大图640*320，小图80*80 </td>
					</tr>
				</tbody>
			</table>

			<h3 class="ui header" id="高级群发接口">3 高级群发接口</h3>
			<p>在公众平台网站上，为订阅号提供了每天一条的群发权限，为服务号提供每月（自然月）4条的群发权限。而对于某些具备开发能力的公众号运营者，
				可以通过高级群发接口，实现更灵活的群发能力。</p>
			<p><strong>请注意：</strong></p>
			<ol>
				<li>该接口暂时仅提供给已微信认证的服务号</li>
				<li>虽然开发者使用高级群发接口的每日调用限制为100次，但是用户每月只能接收4条，请小心测试</li>
				<li>无论在公众平台网站上，还是使用接口群发，用户每月只能接收4条群发消息，多于4条的群发将对该用户发送失败。</li>
			</ol>
			
			<h4 class="ui header">（1）上传图文消息素材</h4>
			<p>示例：</p>
			<pre><code>weixin.uploadNews({
	articles : [{
		"thumb_media_id" : "K1frURlJ6aauzYO40c-qjl3ztRerMnH3QV-eVfEFPMgriLQckA1FMEfx8pBD18Ys",
		"author" : "图文消息的作者",
		"title" : "每个Web开发者必备的9个软技能",
		"content_source_url" : "http://www.csdn.net/article/2014-04-01/2819079-9-soft-skills-every-web-developer-should-master",
		"content" : "图文消息页面的内容，支持HTML标签",
		"digest" : "图文消息的描述",
		"show_cover_pic" : "1"
	}, {
		"thumb_media_id" : "K1frURlJ6aauzYO40c-qjl3ztRerMnH3QV-eVfEFPMgriLQckA1FMEfx8pBD18Ys",
		"author" : "图文消息的作者",
		"title" : "轻松打造品牌轻应用：实时Web App开发框架Clouda",
		"content_source_url" : "http://www.csdn.net/article/2014-03-07/2818676-baidu-clouda",
		"content" : "图文消息页面的内容，支持HTML标签",
		"digest" : "图文消息的描述",
		"show_cover_pic" : "0"
	}]
}, function(data) {
	console.log(data);
});</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> articles </td>
						<td> 是 </td>
						<td> 图文消息，一个图文消息支持1到10条图文 </td>
					</tr>
					<tr>
						<td> thumb_media_id </td>
						<td> 是 </td>
						<td> 图文消息缩略图的media_id，可以在基础支持-上传多媒体文件接口中获得 </td>
					</tr>
					<tr>
						<td> author </td>
						<td> 否 </td>
						<td> 图文消息的作者 </td>
					</tr>
					<tr>
						<td> title </td>
						<td> 是 </td>
						<td> 图文消息的标题 </td>
					</tr>
					<tr>
						<td> content_source_url </td>
						<td> 否 </td>
						<td> 在图文消息页面点击“阅读原文”后的页面 </td>
					</tr>
					<tr>
						<td> content </td>
						<td> 是 </td>
						<td> 图文消息页面的内容，支持HTML标签 </td>
					</tr>
					<tr>
						<td> digest </td>
						<td> 否 </td>
						<td> 图文消息的描述 </td>
					</tr>
					<tr>
						<td> show_cover_pic </td>
						<td> 否 </td>
						<td> 是否显示封面，1为显示，0为不显示 </td>
					</tr>
				</tbody>
			</table>

			<p>返回数据示例（正确时的JSON返回结果）：</p>
			<pre><code>{ 
	type: 'news',
	media_id: 'pKZBTA-E7ZLT5NcL9Ec2kr7xUYuWUhKgt_Ly4WXnjREEjmRAQ3ydRtNTWHqsssbG',
	created_at: 1402101120
}</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> type </td>
						<td> 媒体文件类型，分别有图片（image）、语音（voice）、视频（video）和缩略图（thumb），次数为news，即图文消息 </td>
					</tr>
					<tr>
						<td> media_id </td>
						<td> 媒体文件/图文消息上传后获取的唯一标识 </td>
					</tr>
					<tr>
						<td> created_at </td>
						<td> 媒体文件上传时间 </td>
					</tr>
				</tbody>
			</table>
			<p>错误时微信会返回错误码等信息，请根据错误码查询错误信息: <a href="http://mp.weixin.qq.com/wiki/index.php?title=%E5%85%A8%E5%B1%80%E8%BF%94%E5%9B%9E%E7%A0%81%E8%AF%B4%E6%98%8E" target="_blank">全局返回码说明</a></p>

			<h4 class="ui header">（2）根据分组进行群发（TODO）</h4>
			<h4 class="ui header">（3）根据OpenID列表群发（TODO）</h4>
			<h4 class="ui header">（4）删除群发（TODO）</h4>
			<h4 class="ui header">（5）事件推送群发结果（TODO）</h4>
			
			

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			<h2 class="ui red header">用户管理</h2>
			
			<h3 class="ui header" id="分组管理接口">1  分组管理接口</h3>
			<p>开发者可以使用接口，对公众平台的分组进行查询、创建、修改操作，也可以使用接口在需要时移动用户到某个分组。</p>
			
			<h4 class="ui header">（1）创建分组</h4>
			<p>一个公众账号，最多支持创建500个分组。</p>
			<p>示例：</p>
			<pre><code>weixin.createGroup({
	name: "testname"
}, function(err, res, body) {
	console.log(body);
});</code></pre>
			<p>参数说明：</p>		
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> name </td>
						<td> 分组名字（30个字符以内） </td>
					</tr>
				</tbody>
			</table>
			<p>返回说明 正常时的返回JSON数据包示例：</p>
			<pre><code>{
	"group":{
		"id":102,
		"name":"testname"
	}
}</code></pre>
			<p>返回结果参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> id </td>
						<td> 分组id，由微信分配 </td>
					</tr>
					<tr>
						<td> name </td>
						<td> 分组名字，UTF8编码 </td>
					</tr>
				</tbody>
			</table>
			<p>错误时的JSON数据包示例（该示例为AppID无效错误）</p>
			<pre><code>{"errcode":40013,"errmsg":"invalid appid"}</code></pre>
			
			
			<h4 class="ui header">（2）查询所有分组</h4>
			<p>示例：</p>
			<pre><code>weixin.getGroups(function(err, res, body) {
	console.log(body);
});</code></pre>
			<p>返回说明 正常时的返回JSON数据包示例：</p>
			<pre><code>{
	"groups" : [{
		"id" : 0,
		"name" : "未分组",
		"count" : 1
	}, {
		"id" : 1,
		"name" : "黑名单",
		"count" : 0
	}, {
		"id" : 2,
		"name" : "星标组",
		"count" : 0
	}, {
		"id" : 100,
		"name" : "test",
		"count" : 0
	}, {
		"id" : 102,
		"name" : "testname",
		"count" : 0
	}]
}</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> groups </td>
						<td> 公众平台分组信息列表 </td>
					</tr>
					<tr>
						<td> id </td>
						<td> 分组id，由微信分配 </td>
					</tr>
					<tr>
						<td> name </td>
						<td> 分组名字，UTF8编码 </td>
					</tr>
					<tr>
						<td> count </td>
						<td> 分组内用户数量 </td>
					</tr>
				</tbody>
			</table>
			<p>错误时的JSON数据包示例（该示例为AppID无效错误）：</p>
			<pre><code>{"errcode":40013,"errmsg":"invalid appid"}</code></pre>
			
			<h4 class="ui header">（3）查询用户所在分组</h4>
			<p>通过用户的OpenID查询其所在的GroupID。</p>
			<p>示例：</p>
			<pre><code>weixin.getGroupId("ojim5txO8ivc0Ff2LKW1nlUJ9hM4", function(err, res, body) {
	console.log(body);
});</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> openid </td>
						<td> 用户的OpenID </td>
					</tr>
				</tbody>
			</table>
			<p>返回说明 正常时的返回JSON数据包示例：</p>
			<pre><code>{"groupid":0}</code></pre>
			<p>返回结果参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> groupid </td>
						<td> 用户所属的groupid </td>
					</tr>
				</tbody>
			</table>
			
			
			<h4 class="ui header">（4）修改分组名</h4>
			<p>示例：</p>
			<pre><code>weixin.updateGroup({
	id: 100,
	name: "GROUP_NAME"
}, function(err, res, body) {
	console.log(body);
});</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> id </td>
						<td> 分组id，由微信分配 </td>
					</tr>
					<tr>
						<td> name </td>
						<td> 分组名字（30个字符以内） </td>
					</tr>
				</tbody>
			</table>
			<p>返回说明 正常时的返回JSON数据包示例：</p>
			<pre><code>{"errcode": 0, "errmsg": "ok"}</code></pre>
			<p>错误时的JSON数据包示例（该示例为AppID无效错误）：</p>
			<pre><code>{"errcode":40013,"errmsg":"invalid appid"}</code></pre>
			
			
			<h4 class="ui header">（5）移动用户分组</h4>
			<p>示例：</p>
			<pre><code>weixin.updateMemberGroup({
	"openid": testParams.toUserName,
	"to_groupid": 100
}, function(err, res, body) {
	console.log(body);
});</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> openid </td>
						<td> 用户唯一标识符 </td>
					</tr>
					<tr>
						<td> to_groupid </td>
						<td> 分组id </td>
					</tr>
				</tbody>
			</table>
			<p>返回说明 正常时的返回JSON数据包示例：</p>
			<pre><code>{"errcode": 0, "errmsg": "ok"}</code></pre>
			<p>错误时的JSON数据包示例（该示例为AppID无效错误）：</p>
			<pre><code>{"errcode":40013,"errmsg":"invalid appid"}</code></pre>
			
			
			<h3 class="ui header" id="获取用户基本信息">2  获取用户基本信息</h3>
			<p>在关注者与公众号产生消息交互后，公众号可获得关注者的OpenID（加密后的微信号，每个用户对每个公众号的OpenID是唯一的。
				对于不同公众号，同一用户的openid不同）。公众号可通过本接口来根据OpenID获取用户基本信息，包括昵称、头像、性别、所在城市、语言和关注时间</p>
			<p>开发者可通过OpenID来获取用户基本信息。请使用https协议。</p>
			<p>示例：</p>
			<pre><code>weixin.getUserInfo({
	openId: "OPENID",
	lang: "zh_CN"
}, function(data) {
	console.log(data);
});</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> openid </td>
						<td> 是 </td>
						<td> 普通用户的标识，对当前公众号唯一 </td>
					</tr>
					<tr>
						<td> lang </td>
						<td> 否 </td>
						<td> 返回国家地区语言版本，zh_CN 简体，zh_TW 繁体，en 英语 </td>
					</tr>
				</tbody>
			</table>
			<p>正常情况下，微信会返回下述JSON数据包给公众号：</p>
			<pre><code>{
	"subscribe" : 1,
	"openid" : "o6_bmjrPTlm6_2sgVt7hMZOPfL2M",
	"nickname" : "Band",
	"sex" : 1,
	"language" : "zh_CN",
	"city" : "广州",
	"province" : "广东",
	"country" : "中国",
	"headimgurl" : "http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/0",
	"subscribe_time" : 1382694957
}</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> subscribe </td>
						<td> 用户是否订阅该公众号标识，值为0时，代表此用户没有关注该公众号，拉取不到其余信息。 </td>
					</tr>
					<tr>
						<td> openid </td>
						<td> 用户的标识，对当前公众号唯一 </td>
					</tr>
					<tr>
						<td> nickname </td>
						<td> 用户的昵称 </td>
					</tr>
					<tr>
						<td> sex </td>
						<td> 用户的性别，值为1时是男性，值为2时是女性，值为0时是未知 </td>
					</tr>
					<tr>
						<td> city </td>
						<td> 用户所在城市 </td>
					</tr>
					<tr>
						<td> country </td>
						<td> 用户所在国家 </td>
					</tr>
					<tr>
						<td> province </td>
						<td> 用户所在省份 </td>
					</tr>
					<tr>
						<td> language </td>
						<td> 用户的语言，简体中文为zh_CN </td>
					</tr>
					<tr>
						<td> headimgurl </td>
						<td> 用户头像，最后一个数值代表正方形头像大小（有0、46、64、96、132数值可选，0代表640*640正方形头像），用户没有头像时该项为空 </td>
					</tr>
					<tr>
						<td> subscribe_time </td>
						<td> 用户关注时间，为时间戳。如果用户曾多次关注，则取最后关注时间 </td>
					</tr>
				</tbody>
			</table>
			<p>错误时微信会返回错误码等信息，JSON数据包示例如下（该示例为AppID无效错误）:</p>
			<pre><code>{"errcode":40013,"errmsg":"invalid appid"}</code></pre>
			
			<h3 class="ui header" id="获取关注者列表">3  获取关注者列表</h3>
			<h3 class="ui header" id="获取用户地理位置">4  获取用户地理位置</h3>
			<h3 class="ui header" id="网页授权获取用户基本信息">5  网页授权获取用户基本信息</h3>
			<h3 class="ui header" id="网页获取用户网络状态">6  网页获取用户网络状态（JS接口）</h3>
			
			
			
			
			

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			<h2 class="ui red header">六、自定义菜单</h2>
			<p>
				目前自定义菜单最多包括3个一级菜单，每个一级菜单最多包含5个二级菜单。一级菜单最多4个汉字，二级菜单最多7个汉字，多出来的部分将会以“...”代替。请注意，创建自定义菜单后，由于微信客户端缓存，需要24小时微信客户端才会展现出来。建议测试时可以尝试取消关注公众账号后再次关注，则可以看到创建后的效果。
			</p>
			<p>目前自定义菜单接口可实现两种类型按钮，如下：</p>
			<div class="ui raised secondary inverted segment">
				click：<br />
用户点击click类型按钮后，微信服务器会通过消息接口推送消息类型为event	的结构给开发者（参考消息接口指南），并且带上按钮中开发者填写的key值，开发者可以通过自定义的key值与用户进行交互；<br />
view：<br />
用户点击view类型按钮后，微信客户端将会打开开发者在按钮中填写的url值	（即网页链接），达到打开网页的目的，建议与网页授权获取用户基本信息接口结合，获得用户的登入个人信息。
			</div>
			
			
			<h3 class="ui header" id="自定义菜单创建接口">6.1 自定义菜单创建接口</h3>
			<p>示例：</p>
			<pre><code>var menu = {
	"button" : [{
		"type" : "click",
		"name" : "今日歌曲",
		"key" : "V1001_TODAY_MUSIC"
	}, {
		"type" : "click",
		"name" : "歌手简介",
		"key" : "V1001_TODAY_SINGER"
	}, {
		"name" : "菜单",
		"sub_button" : [{
			"type" : "view",
			"name" : "搜索",
			"url" : "http://www.soso.com/"
		}, {
			"type" : "view",
			"name" : "视频",
			"url" : "http://v.qq.com/"
		}, {
			"type" : "click",
			"name" : "赞一下我们",
			"key" : "V1001_GOOD"
		}]
	}]
};

weixin.createMenu(menu, function(data) {
	console.log(data);
});</code></pre>
			<p>创建成功时回调函数data返回结果：</p>
			<pre><code>{ errcode: 0, errmsg: 'ok' }</code></pre>
			<p>参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:120px">参数 </th>
						<th style="width:120px">是否必须 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> button </td>
						<td> 是 </td>
						<td> 一级菜单数组，个数应为1~3个 </td>
					</tr>
					<tr>
						<td> sub_button </td>
						<td> 否 </td>
						<td> 二级菜单数组，个数应为1~5个 </td>
					</tr>
					<tr>
						<td> type </td>
						<td> 是 </td>
						<td> 菜单的响应动作类型，目前有click、view两种类型 </td>
					</tr>
					<tr>
						<td> name </td>
						<td> 是 </td>
						<td> 菜单标题，不超过16个字节，子菜单不超过40个字节 </td>
					</tr>
					<tr>
						<td> key </td>
						<td> click类型必须 </td>
						<td> 菜单KEY值，用于消息接口推送，不超过128字节 </td>
					</tr>
					<tr>
						<td> url </td>
						<td> view类型必须 </td>
						<td> 网页链接，用户点击菜单可打开链接，不超过256字节 </td>
					</tr>
				</tbody>
			</table>
			
			<h3 class="ui header" id="自定义菜单查询接口">6.2 自定义菜单查询接口</h3>
			<p>
				使用接口创建自定义菜单后，开发者还可使用接口查询自定义菜单的结构。
			</p>
			<pre><code>weixin.getMenu(function(data) {
	console.log(data)
	// TODO
});</code></pre>
			<p>
				如果菜单存在，返回结果示例：
			</p>
			<pre><code>{
    "button": [
        {
            "type": "click", 
            "name": "今日歌曲", 
            "key": "V1001_TODAY_MUSIC"
        }, 
        {
            "type": "click", 
            "name": "歌手简介", 
            "key": "V1001_TODAY_SINGER"
        }, 
        {
            "name": "菜单", 
            "sub_button": [
                {
                    "type": "view", 
                    "name": "搜索", 
                    "url": "http://www.soso.com/"
                }, 
                {
                    "type": "view", 
                    "name": "视频", 
                    "url": "http://v.qq.com/"
                }, 
                {
                    "type": "click", 
                    "name": "赞一下我们", 
                    "key": "V1001_GOOD"
                }
            ]
        }
    ]
}</code></pre>
			<p>
				如果菜单不存在，返回结果：
			</p>
			<pre><code>{ errcode: 46003, errmsg: 'menu no exist' }</code></pre>																		
			
 <h3 class="ui header" id="自定义菜单删除接口">6.3 自定义菜单删除接口</h3>
			<p>
				使用接口创建自定义菜单后，开发者还可使用接口删除当前使用的自定义菜单。
			</p>
			<pre><code>weixin.deleteMenu(function(data) {
	console.log(data);
});</code></pre>
			<p>
				如果删除成功，返回结果
			</p>
			<pre><code>{ errcode: 0, errmsg: 'ok' }</code></pre>																		
			
 			<h3 class="ui header" id="自定义菜单事件推送">6.4 自定义菜单事件推送</h3>
 			<p>
				用户点击自定义菜单后，微信会把点击事件推送给开发者，请注意，点击菜单弹出子菜单，不会产生上报。
			</p>
			<h4>点击菜单拉取消息时的事件推送</h4>
			<pre><code>weixin.on('clickEventMsg', function(data) {
	console.log('>>>>>>>>> clickEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400725592',
	msgType : 'event',
	event : 'CLICK',
	eventKey : 'ONE_KEY'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，CLICK </td>
					</tr>
					<tr>
						<td> eventKey </td>
						<td> 事件KEY值，与自定义菜单接口中KEY值对应 </td>
					</tr>
				</tbody>
			</table>
			<h4>点击菜单跳转链接时的事件推送</h4>
			<pre><code>weixin.on('viewEventMsg', function(data) {
	console.log('>>>>>>>>> viewEventMsg emit >>>>>>>>>');
	console.log(data);
});</code></pre>
			<p>
				data参数示例：
			</p>
			<pre><code>{
	toUserName : 'gh_6716c73fdcbe',
	fromUserName : 'ojim5txO8ivc0Ff2LKW1nlUJ9hM4',
	createTime : '1400725790',
	msgType : 'event',
	event : 'VIEW',
	eventKey : 'http://www.baidu.com/'
}</code></pre>
			<p>
				参数说明：
			</p>
			<table border="1" cellspacing="0" cellpadding="4">
				<tbody>
					<tr>
						<th style="width:180px">参数 </th>
						<th style="width:470px">描述 </th>
					</tr>
					<tr>
						<td> toUserName </td>
						<td><b>开发者</b>微信号 </td>
					</tr>
					<tr>
						<td> fromUserName </td>
						<td> 发送方帐号（一个OpenID） </td>
					</tr>
					<tr>
						<td> createTime </td>
						<td> 消息创建时间 （整型） </td>
					</tr>
					<tr>
						<td> msgType </td>
						<td> 消息类型，event </td>
					</tr>
					<tr>
						<td> event </td>
						<td> 事件类型，VIEW </td>
					</tr>
					<tr>
						<td> eventKey </td>
						<td> 事件KEY值，设置的跳转URL </td>
					</tr>
				</tbody>
			</table>
 			

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			<h2 class="ui red header">七、推广支持</h2>
			<h3 class="ui header" id="生成带参数的二维码">7.1 生成带参数的二维码</h3>
			<p>为了满足用户渠道推广分析的需要，公众平台提供了生成带参数二维码的接口。使用该接口可以获得多个带不同场景值的二维码，用户扫描后，公众号可以接收到事件推送。</p>
			<p>目前有2种类型的二维码，分别是临时二维码和永久二维码，前者有过期时间，最大为1800秒，但能够生成较多数量，后者无过期时间，数量较少（目前参数只支持1--100000）。两种二维码分别适用于帐号绑定、用户来源统计等场景。</p>
			<p>用户扫描带场景值二维码时，可能推送以下两种事件：</p>
			<ol>
				<li>如果用户还未关注公众号，则用户可以关注公众号，关注后微信会将带场景值关注事件推送给开发者。</li>
				<li>如果用户已经关注公众号，在用户扫描后会自动进入会话，微信也会将带场景值扫描事件推送给开发者。</li>
			</ol>
			<p>获取带参数的二维码的过程包括两步，首先创建二维码ticket，然后凭借ticket到指定URL换取二维码。</p>
			<h4>（1）创建二维码ticket</h4>
			<p><strong>临时二维码请求示例：</strong></p>
			<pre><code>var qrcode = {
	"expire_seconds" : 1800,
	"action_name" : "QR_SCENE",
	"action_info" : {
		"scene" : {
			"scene_id" : 123
		}
	}
}
weixin.createQrcode(qrcode, function(data) {
	console.log(data);
});</code></pre>
			<p>如果创建成功返回结果：</p>
			<pre><code>{
	ticket: 'gQEA8DoAAAAAAAAAASxodHRwOi8vd2VpeGluLnFxLmNvbS9xL0MzWFh4bExtcWZEUS1DNFhsMXVqAAIEaZ1_UwMECAcAAA==',
	expire_seconds: 1800
}</code></pre>
			<p><strong>永久二维码请求示例：</strong></p>
			<pre><code>var qrcode = {
	"action_name" : "QR_LIMIT_SCENE",
	"action_info" : {
		"scene" : {
			"scene_id" : 123
		}
	}
};
weixin.createQrcode(qrcode, function(data) {
	console.log(data);
});</code></pre>
			<p>如果创建成功返回结果：</p>
			<pre><code>{ ticket: 'gQGF8DoAAAAAAAAAASxodHRwOi8vd2VpeGluLnFxLmNvbS9xL0hYV1o5YnJsRGZCME16ck8yVm1qAAIEzZ1_UwMEAAAAAA==' }</code></pre>		
			<p>请求参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> expire_seconds </td>
						<td> 该二维码有效时间，以秒为单位。 最大不超过1800。 </td>
					</tr>
					<tr>
						<td> action_name </td>
						<td> 二维码类型，QR_SCENE为临时,QR_LIMIT_SCENE为永久 </td>
					</tr>
					<tr>
						<td> action_info </td>
						<td> 二维码详细信息 </td>
					</tr>
					<tr>
						<td> scene_id </td>
						<td> 场景值ID，临时二维码时为32位非0整型，永久二维码时最大值为100000（目前参数只支持1--100000） </td>
					</tr>
				</tbody>
			</table>
			
			<p>返回结果参数说明：</p>
			<table border="1" cellspacing="0" cellpadding="5">
				<tbody>
					<tr>
						<th style="width:240px">参数 </th>
						<th>说明 </th>
					</tr>
					<tr>
						<td> ticket </td>
						<td> 获取的二维码ticket，凭借此ticket可以在有效时间内换取二维码。 </td>
					</tr>
					<tr>
						<td> expire_seconds </td>
						<td> 二维码的有效时间，以秒为单位。最大不超过1800。 </td>
					</tr>
				</tbody>
			</table>
			
			<h4>（2）通过ticket换取二维码</h4>
			<p>获取二维码ticket后，开发者可用ticket换取二维码图片。请注意，本接口无须登录态即可调用。</p>
			<strong>请求说明：</strong>
			<div class="ui inverted secondary segment">
				HTTP GET请求（请使用https协议）<br />
				<a href="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=TICKET" target="_blank">https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=TICKET</a><br />
提醒：TICKET记得进行UrlEncode
			</div>
			<strong>返回说明：</strong>
			<p>ticket正确情况下，http 返回码是200，是一张图片，可以直接展示或者下载。</p>
			<p>错误情况下（如ticket非法）返回HTTP错误码404。</p>
			

			<div class="ui horizontal icon divider">
				<i class="circular leaf icon"></i>
			</div>
			
		</div>

		<a href="https://github.com/silianlinyi/weixin-api" target="_blank">
			<img style="position: fixed; top: 0; right: 0; border: 0;z-index: 999;" src="img/1dbSqT9ykm.png" width="149" height="149" alt="Fork me on GitHub" data-pinit="registered">
		</a>

		<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
		
		<script type="text/javascript" src="js/index.js"></script>
	</body>
</html>
